# Язык программирования C

### Первая программа (Hello, World!)

```c
#include <stdio.h>

int main(void) {
    printf("Hello World!\n");
    return 0;
}
```

`#include <<имя файла>>` — директива препроцессора, которая включает содержимое
другого файла в настоящий файл с исходным кодом

Выполнение каждой программы начинается с вызова функции `main`.

Программа состоит из директив препроцессора, объявлений типов, глобальных переменных и функций.

Функция состоит из объявления и блока с командами (последний — в фигурных скобках). Команды разделяются точкой с запятой.

```c
int main(void) // объявление: возвращаемый_тип имя_функции(аргументы с типами через запятую)
{   // блок
    printf("Hello World!\n");
    return 0;
}
```


### Примитивные типы данных и литералы

| Тип                   | Описание                              |
| --------------------- | ------------------------------------- |
| `char`                | Целое 8-битное число со знаком        |
| `short`               | Целое 16-битное число со знаком       |
| `int`                 | Целое 32-битное число со знаком       |
| `long long`           | Целое 64-битное число со знаком       |
| `unsigned char`       | Целое 8-битное число без знака        |
| `unsigned short`      | Целое 16-битное число без знака       |
| `unsigned int`        | Целое 32-битное число без знака       |
| `unsigned long long`  | Целое 64-битное число без знака       |
| `float`               | 32-битное число с плавающей точкой    |
| `double`              | 64-битное число с плавающей точкой    |
| `void`                | "Пустой" тип                          |

### Объявление функции

Для того, чтобы написать функцию, которую потом можно использовать в программе,
нужно написать прототип функции

Общая схема:

```c
// Прототип
возвращаемый_тип   имя_функции( тип_аргумента_1 имя_аргумента_1, 
                                тип_аргумента_2 имя_аргумента_2, ... );
// ...
// Объявление
возвращаемый_тип   имя_функции( тип_аргумента_1 имя_аргумента_1, 
                                тип_аргумента_2 имя_аргумента_2, ... ) 
{
    // код функции
}
```

Пример:

```c
int polynomial_power_value_determinant(double point, double* value, double* determinant);

int polynomial_power_value_determinant(double point, double* value, double* determinant) {
    *value = 1;
    *determinant = 2;
    return 3;
}


int main(void) {
    double x = 0., y = 0.;
    int z = 0;

    z = polynomial_power_value_determinant(1., &x, &y);
    printf("%lf %lf %d\n", x, y, z);
    return 0;
}
```

### Работа с файлами

Работа с файлами в стандартной библиотеке языка C выполняется с помощью
файловых дескрипторов — объектов типа `FILE`. Внутреннее устройство файловых
дескрипторов зависит от операционной системы, поэтому все функции стандартной
библиотеки работают с *указателями* на тип `FILE`.

#### Пример работы с файлами

Обратите внимание: это минимальный пример без контроля ошибок. На практике
у всех функций для работы с файлами нужно проверять выходное значение.

```c
#include <stdio.h>

int main(void) {
    FILE *fin, *fout;
    int data;

    fin = fopen("in.txt", "r");
    fout = fopen("out.txt", "w");

    fscanf(fin, "%d", &data);
    fprintf(fout, "%d", data+1);

    fclose(fin);
    fclose(fout);

    return 0;
}
```

Для работы с файлами используются перечисленные далее функции, которые объявлены в 
заголовочном файле `<stdio.h>`.

#### Открытие файла

```c
FILE* fopen(const char *path, const char *mode);
```

- `path` — путь к файлу (абсолютный или относительно каталога, из которого вызвана программа)
- `mode` — режим работы с файлом:
    - `r` — для чтения
    - `w` — для *перезаписи* (если файл существует, всё его содержимое удаляется сразу после открытия)
    - `a` — для дополнения (записи в конец файла)
    - (есть и другие режимы)

Возвращаемое значение: `NULL`, если открыть файл не удалось, или указатель на дескриптор
в случае успешного открытия файла.

Примечание: ключевой слово `const` перед типом аргумента означает, что функция не
изменяет значение памяти по этому указателю.

#### Закрытие файла
После завершения работы с файлом его необходимо закрыть. Функция `fclose` сохраняет все изменения в файле на диск и закрывает его.

```c
int fclose(FILE* fp);
```

- `fp` — указатель на файловый дескриптор

Возвращаемое значение: `0`, если файл успешно закрыт; `EOF` если при закрытии файла произошла ошибка.

Два раза закрывать файл по одному и тому же дескриптору нельзя.

#### Чтение и запись

Для чтения и записи данных при работе с файлами используются функции `fprintf` и `fscanf`. 
Первым аргументом они принимают указатель на файл, с которым выполняется работа, а далее — аналогично `printf` и `scanf`.

```c
int fprintf(FILE *stream, const char *format, ...значения аргументов);
int fscanf(FILE *stream, const char *format, ...указатели на переменные)
```
